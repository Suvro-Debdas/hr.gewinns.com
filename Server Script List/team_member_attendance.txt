frappe.response["message"]=frappe.db.sql("SELECT a.employee as Employee, a.employee_name as EmployeeName, Date(a.creation) as WorkDate,cast(TIME(min(a.creation)) as time(0)) as FirstIn, IF(TIMEDIFF(max(a.creation),min(a.creation))=0,' ',cast(TIME(max(a.creation)) as time(0)) ) as LastOut,c.department as Department FROM `tabEmployee Checkin` as a INNER JOIN `tabEmployee` as c ON a.employee=c.employee  WHERE Date(a.creation) = CURDATE() GROUP BY Date(a.creation) DESC,Employee", as_dict = True)